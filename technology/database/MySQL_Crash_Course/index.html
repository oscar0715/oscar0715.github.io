<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"menuet.xyz","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="《MySQL Crash Course》">
<meta property="og:type" content="article">
<meta property="og:title" content="《MySQL Crash Course》笔记">
<meta property="og:url" content="http://menuet.xyz/technology/database/MySQL_Crash_Course/index.html">
<meta property="og:site_name" content="Revolutionary Road">
<meta property="og:description" content="《MySQL Crash Course》">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-04-14T05:25:17.000Z">
<meta property="article:modified_time" content="2021-09-15T07:16:46.060Z">
<meta property="article:author" content="Jiaming Ni">
<meta property="article:tag" content="Mysql">
<meta property="article:tag" content="Database">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://menuet.xyz/technology/database/MySQL_Crash_Course/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>《MySQL Crash Course》笔记 | Revolutionary Road</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Revolutionary Road</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://menuet.xyz/technology/database/MySQL_Crash_Course/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiaming Ni">
      <meta itemprop="description" content="你闻讯而来 我大喜过望">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Revolutionary Road">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          《MySQL Crash Course》笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-14 13:25:17" itemprop="dateCreated datePublished" datetime="2017-04-14T13:25:17+08:00">2017-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-09-15 15:16:46" itemprop="dateModified" datetime="2021-09-15T15:16:46+08:00">2021-09-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Techonology/" itemprop="url" rel="index"><span itemprop="name">Techonology</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Techonology/Database/" itemprop="url" rel="index"><span itemprop="name">Database</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>《MySQL Crash Course》</p>
<span id="more"></span>

<hr>
<h1 id="第一章-了解SQL"><a href="#第一章-了解SQL" class="headerlink" title="第一章 了解SQL"></a>第一章 了解SQL</h1><p>什么是数据库：</p>
<ol>
<li>区分 DB 和 DBMS （DB 是保存有组织的数据的容器）</li>
<li>表 Table</li>
<li>模式 schema ：关于数据库和表的布局以及特性</li>
<li>列 column </li>
<li>数据类型 data type</li>
<li>行：表中的一条记录</li>
<li>主键：PK 能唯一区分表中的行 （唯一，非空）</li>
<li>SQL（Structured Query Language）</li>
</ol>
<h1 id="第二章-MySQL简介"><a href="#第二章-MySQL简介" class="headerlink" title="第二章 MySQL简介"></a>第二章 MySQL简介</h1><p>MySQL：</p>
<ol>
<li><code>mysql -u root -p</code> 然后输入密码</li>
<li>命令用 <code>;</code> 结尾</li>
<li>用 <code>quit</code> 或者 <code>exit</code> 退出程序</li>
<li>MySQL Administrator：服务器管理</li>
<li>MySQL Query Browser：图形交互客户机，用来编写和执行 MySQL 命令</li>
</ol>
<h1 id="第三章-使用-MySQL"><a href="#第三章-使用-MySQL" class="headerlink" title="第三章 使用 MySQL"></a>第三章 使用 MySQL</h1><p>使用 MySQL:</p>
<ol>
<li>选择数据库<pre><code> `USE &lt;database name&gt;;`
</code></pre>
</li>
<li>列出所有数据库<pre><code> `SHOW DATABASES;`
</code></pre>
</li>
<li>列出当前数据库中所有的表<pre><code> `SHOW TABLES;`
</code></pre>
</li>
<li>显示当前表中所有的列<pre><code> `SHOW COLUMNS FROM &lt;table name&gt;` 或者 `DESCRIBE &lt;table name&gt;`
</code></pre>
</li>
<li><code>auto_increment</code> 自动增量<pre><code> 这样的话，必须记住最后一次使用的值
</code></pre>
</li>
<li><code>HELP SHOW</code> 更多关于 <code>SHOW</code> 的语句</li>
</ol>
<h1 id="第四章-数据检索"><a href="#第四章-数据检索" class="headerlink" title="第四章 数据检索"></a>第四章 数据检索</h1><p>检索数据：</p>
<ol>
<li>检索单个列：<pre><code> - `SELECT &lt;COLUMN NAME&gt; FROM &lt;TABLE NAME&gt;;`
 - 返回数据是未排序的，可能是被添加到表中的顺序，也可能不是。
 - 只要返回相同的行数，就是正常的
 - SQL语句不区分大小写
 - SQL语句不区分空格，所以可以分成多行写
</code></pre>
</li>
<li>检索多个列：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">&lt;</span>COL1<span class="operator">&gt;</span>, <span class="operator">&lt;</span>COL2<span class="operator">&gt;</span> </span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span><span class="keyword">TABLE</span> NAME<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li>
<li>检索所有列：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用通配符</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span><span class="keyword">TABLE</span> NAME<span class="operator">&gt;</span>;</span><br><span class="line"><span class="comment">-- 除非确实需要每一个列，通常不用通配符，否则会降低检索性能</span></span><br></pre></td></tr></table></figure></li>
<li>检索不同的行 <code>DISTINCT</code><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用 DISTINCT 关键字</span></span><br><span class="line"><span class="comment">-- DISTINCT 关键字必须直接放在列的前面</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> vend_id</span><br><span class="line"><span class="keyword">FROM</span> products;</span><br></pre></td></tr></table></figure></li>
<li>限制结果数量 <code>LIMIT</code> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用 LIMIT 关键字</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line">LIMIT <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用 LIMIT 关键字</span></span><br><span class="line"><span class="comment">-- 也可以指定开始行的位置</span></span><br><span class="line"><span class="comment">-- mysql 从第0行开始</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line">LIMIT <span class="operator">&lt;</span><span class="keyword">start</span> position<span class="operator">&gt;</span> <span class="operator">&lt;</span><span class="type">row</span> number<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- MySQL5 支持</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line">LIMIT <span class="operator">&lt;</span><span class="type">row</span> number<span class="operator">&gt;</span> </span><br><span class="line"><span class="keyword">OFFSET</span> <span class="operator">&lt;</span><span class="keyword">start</span> position<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure></li>
<li>限定表的名字，和数据库的名字<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- crashcourse 为数据库的名字</span></span><br><span class="line"><span class="comment">-- products 为表名字</span></span><br><span class="line"><span class="keyword">SELECT</span> products.prod_name</span><br><span class="line"><span class="keyword">FROM</span> crashcourse.products;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="第五章-排序检索"><a href="#第五章-排序检索" class="headerlink" title="第五章 排序检索"></a>第五章 排序检索</h1><p>排序数据：</p>
<ol>
<li>检索出的数据不是随机显示的，而是以底层表中出现的顺序显示<ul>
<li>可以是数据最初的添加顺序</li>
<li>但是会随着更新删除，MySQL会重用回收存储空间，而改变顺序</li>
<li>所以，如果不明确规定排序顺序，不应该假定检索出的数据又意义。</li>
</ul>
</li>
<li>子句 = 关键字 + 数据<ul>
<li>例如：Select 语句的 From 子句</li>
</ul>
</li>
<li>Order By 子句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name</span><br><span class="line"><span class="keyword">FROM</span> prodcts</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 实际上还可以通过非选择列排序</span></span><br></pre></td></tr></table></figure></li>
<li>按多个列排序<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 首先按照价格排序，再按照名字排序</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</span><br><span class="line"><span class="keyword">FROM</span> prodcts</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_price, prod_name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 只有在price相同的时候，才会使用到按照name排序</span></span><br></pre></td></tr></table></figure></li>
<li>指定排序方向<ul>
<li><code>ASC</code> 其实没什么用，因为默认就是升序</li>
<li><code>DESC</code> 降序<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 按照价格 降序 排序</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</span><br><span class="line"><span class="keyword">FROM</span> prodcts</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_price <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 先按照价格 降序 排序，再按照名字默认的 升序 排序</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id, prod_price, prod_name</span><br><span class="line"><span class="keyword">FROM</span> prodcts</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_price <span class="keyword">DESC</span>, prod_name </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果想要多个列降序排序，必须在每一个列上都加上 DESC 关键字</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>使用 <code>ORDER BY</code> 和 <code>LIMIT</code> 组合能找出最高的或者最低的<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_price</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_price <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">1</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="第六章-过滤数据"><a href="#第六章-过滤数据" class="headerlink" title="第六章 过滤数据"></a>第六章 过滤数据</h1><p>过滤数据：</p>
<ol>
<li>使用 <code>WHERE</code> 子句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name, prod_price</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="operator">=</span> <span class="number">2.50</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ORDER BY 应该位于 where 子句之后</span></span><br></pre></td></tr></table></figure></li>
<li><code>WHERE</code> 子句操作符：<ul>
<li><code>=</code> </li>
<li><code>&lt;&gt;</code>, <code>!=</code> 不等于</li>
<li><code>&lt;</code></li>
<li><code>&lt;=</code></li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>BETWEEN AND</code></li>
</ul>
</li>
<li>范围值检查 <code>BETWEEN AND</code>：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name, prod_price</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="keyword">BETWEEN</span> <span class="number">5</span> <span class="keyword">AND</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure></li>
<li>空值检查 <code>IS NULL</code> ：<ul>
<li>用 <code>IS NULL</code></li>
<li>在选择不具有特定值的时候，不返回 NULL，因为NULL具有特殊含义，数据库不知道他们是否匹配<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name, prod_price</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h1 id="第七章-高级数据过滤"><a href="#第七章-高级数据过滤" class="headerlink" title="第七章 高级数据过滤"></a>第七章 高级数据过滤</h1><p>高级数据过滤：</p>
<ol>
<li>组合 <code>WHERE</code> 子句<ul>
<li><code>AND</code>， <code>OR</code></li>
<li>用 <code>()</code> 来明确次序</li>
</ul>
</li>
<li><code>IN</code> 操作符<ul>
<li>合法值由逗号分隔后，全都列在圆括号中</li>
<li><code>IN</code> 和 <code>OR</code> 完成的功能相同</li>
<li><code>IN</code> 更清楚直观，执行更快</li>
<li>可以包含别的 <code>SELECT</code> 语句<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> prod_name, prod_price</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> vend_id <span class="keyword">IN</span> (<span class="number">1002</span>,<span class="number">1003</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> prod_name;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><code>NOT</code> 操作符<ul>
<li><code>NOT</code> 否定后面的条件</li>
</ul>
</li>
</ol>
<h1 id="第八章-用通配符进行过滤"><a href="#第八章-用通配符进行过滤" class="headerlink" title="第八章 用通配符进行过滤"></a>第八章 用通配符进行过滤</h1><p>通配符过滤：</p>
<ol>
<li><code>%</code> 通配符<ul>
<li>任何字符出现任意次数，包含0次</li>
<li>尾空格会影响通配符匹配</li>
<li>通配符不能匹配 <code>NULL</code><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查找 prod_name 以 ‘jet’ 为开头的产品</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_id, prod_name</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> prod_name <span class="keyword">LIKE</span> <span class="string">&#x27;jet%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 任何位置包含jet</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name <span class="keyword">LIKE</span> <span class="string">&#x27;%jet%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 指定开头结尾</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name <span class="keyword">LIKE</span> <span class="string">&#x27;s%e&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><code>_</code> 下划线通配符，只能匹配单个字符（不能0个）</li>
<li>但是是用通配符是有代价的，通常要花费更长的搜索时间</li>
</ol>
<h1 id="第九章-正则表达式"><a href="#第九章-正则表达式" class="headerlink" title="第九章 正则表达式"></a>第九章 正则表达式</h1><p>正则表达式：</p>
<ol>
<li>基本字符匹配<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 包含 &#x27;1000&#x27; 的prod_name</span></span><br><span class="line"><span class="keyword">SELECT</span> prod_name</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> prod_name REGEXP <span class="string">&#x27;1000&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 或 关键字 |</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name REGEXP <span class="string">&#x27;1000|2000&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 匹配几个字符之一</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name REGEXP <span class="string">&#x27;[123] ton&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 匹配 除了括号中几个字符 以外的字符</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name REGEXP <span class="string">&#x27;[^123] ton&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 匹配 范围</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name REGEXP <span class="string">&#x27;[1-6] ton&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 匹配特殊字符 &#x27;.&#x27;，需要转义 （escaping）</span></span><br><span class="line"><span class="comment">-- 不转义的话，&#x27;.&#x27; 匹配任意字符</span></span><br><span class="line"><span class="keyword">WHERE</span> prod_name REGEXP <span class="string">&#x27;\\.&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li>匹配字符类</li>
<li>重复元字符<ul>
<li><code>*</code> 0或多</li>
<li><code>?</code> 0或1，等于<code>&#123;0,1&#125;</code></li>
<li><code>+</code> 不少于1，等于<code>&#123;1,&#125;</code></li>
<li><code>&#123;n&#125;</code> 指定数目匹配</li>
<li><code>&#123;n,&#125;</code> 不少于 n</li>
<li><code>&#123;n,m&#125;</code> 匹配数目范围</li>
</ul>
</li>
<li>定位符<ul>
<li><code>^</code> 文本开始</li>
<li><code>$</code> 文本结束</li>
<li><code>[[:&lt;:]]</code> 词的开始</li>
<li><code>[[:&gt;:]]</code> 词的结尾</li>
</ul>
</li>
</ol>
<h1 id="第十章-创建计算字段"><a href="#第十章-创建计算字段" class="headerlink" title="第十章 创建计算字段"></a>第十章 创建计算字段</h1><p>计算字段并不实际存在于数据库当中，而是运行时，在 Select 语句内创建</p>
<ol>
<li>拼接字段，利用 <code>Concat()</code> 函数<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Concat(vend_name, <span class="string">&#x27;(&#x27;</span>, vend_country, <span class="string">&#x27;)&#x27;</span>)</span><br><span class="line"><span class="keyword">FROM</span> vendors</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> vendor_name</span><br></pre></td></tr></table></figure></li>
<li>去掉头尾的空格 <code>TRIM()</code><ul>
<li>去掉右边（尾部）的空格 <code>RTRIM()</code></li>
<li>去掉左边（尾部）的空格 <code>LTRIM()</code></li>
</ul>
</li>
<li>使用别名 <code>AS</code> </li>
<li>执行算术计算</li>
<li>测试计算<br> 可以通过省略 FROM 关键字进行测试。</li>
</ol>
<h1 id="第十一章-使用数据处理函数"><a href="#第十一章-使用数据处理函数" class="headerlink" title="第十一章 使用数据处理函数"></a>第十一章 使用数据处理函数</h1><p>文本处理函数：</p>
<ol>
<li><code>Upper()</code> / <code>Lower</code></li>
<li><code>Length()</code> </li>
<li><code>Locate()</code> 找出一个子串</li>
<li><code>Left</code> / <code>Right</code></li>
<li><code>TRIM()</code> / <code>LTRIM()</code> / <code>RTRIM()</code></li>
<li><code>Soundex()</code> </li>
</ol>
<p>时间和日期处理：</p>
<ol>
<li>格式：yyyy-mm-dd</li>
</ol>
<p>时间日期相关函数</p>
<ol>
<li>AddDate()</li>
<li>AddTime()</li>
<li>CurDate()</li>
<li>CurTime()</li>
<li>Date()<br> 取出日期部分<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 找出九月一号的订单</span></span><br><span class="line"><span class="keyword">SELECT</span> cust_id, order_num</span><br><span class="line"><span class="keyword">FROM</span> orders</span><br><span class="line"><span class="keyword">WHERE</span> <span class="type">Date</span>(order_date) <span class="operator">=</span> <span class="string">&#x27;2015-09-01&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 找出九月份的订单</span></span><br><span class="line"><span class="keyword">SELECT</span> cust_id, order_num</span><br><span class="line"><span class="keyword">FROM</span> orders</span><br><span class="line"><span class="keyword">WHERE</span> <span class="type">Date</span>(order_date) <span class="keyword">BETWEEN</span> <span class="string">&#x27;2015-09-01&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;2015-09-30&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li>DateDiff()</li>
<li>Year() / Month() / Day() / Hour() / Minute() / Second()<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 找出九月份的订单</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">Year</span>(order_date) <span class="operator">=</span>  <span class="number">2015</span> <span class="keyword">AND</span> <span class="keyword">Month</span>(order_date) <span class="operator">=</span> <span class="number">09</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>数值处理函数(略)</p>
<h1 id="第十二章-汇总数据"><a href="#第十二章-汇总数据" class="headerlink" title="第十二章 汇总数据"></a>第十二章 汇总数据</h1><p>汇总数据的例子：</p>
<ol>
<li>确定表中的行数</li>
<li>获得表中行组的和</li>
<li>找出表列的最大值，最小值，和平均值</li>
</ol>
<p>MySQL的聚集函数：</p>
<ol>
<li>AVG()<ul>
<li>AVG()只能用来确定特定数值列的平均值，而且列名必须作为函数参数给出。</li>
<li>NULL值 AVG()函数忽略列值为NULL的行。</li>
</ul>
</li>
<li>COUNT()<ul>
<li>使用COUNT(*)对表中行的数目进行计数，不管表列中包含的是空值（NULL）还是非空值。</li>
<li>使用COUNT(column)对特定列中具有值的行进行计数，忽略NULL值。</li>
<li>区别就在于有没有传参数</li>
</ul>
</li>
<li>MAX()</li>
<li>MIN()<ul>
<li>MySQL允许将它用来返回任意列中的最小值，包括返回文本列中的最小值。在用于文本数据时，如果数据按相应的列排序，则MIN()返回最前面的行。</li>
</ul>
</li>
<li>SUM()</li>
</ol>
<h1 id="第十三章-分组数据"><a href="#第十三章-分组数据" class="headerlink" title="第十三章 分组数据"></a>第十三章 分组数据</h1><p>一个分组的例子</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> vend_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> num_prods</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> vend_id;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- Vend_id    num_prods</span></span><br><span class="line"><span class="comment">-- 1001       3</span></span><br><span class="line"><span class="comment">-- 1002       2</span></span><br><span class="line"><span class="comment">-- 1003       7</span></span><br><span class="line"><span class="comment">-- 1005       3</span></span><br></pre></td></tr></table></figure>

<p><code>GROUP BY</code> 规定：</p>
<ol>
<li><code>GROUP BY</code> 子句可以包含任意数目的列。这使得能对分组进行嵌套，为数据分组提供更细致的控制。</li>
<li>如果在GROUP BY子句中嵌套了分组，数据将在最后规定的分组上进行汇总。</li>
<li>GROUP BY子句中列出的每个列都必须是检索列或有效的表达式（但不能是聚集函数）</li>
<li>除聚集计算语句外，SELECT语句中的每个列都必须在GROUP BY子句中给出。</li>
<li>如果分组列中具有NULL值，则NULL将作为一个分组返回。如果列中有多行NULL值，它们将分为一组。</li>
<li>GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前。</li>
</ol>
<p>HAVING子句：</p>
<ul>
<li>HAVING非常类似于WHERE。</li>
<li>事实上，目前为止所学过的所有类型的WHERE子句都可以用HAVING来替代。</li>
<li>唯一的差别是WHERE过滤行，而HAVING过滤分组。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> vend_id, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> num_prods</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> vend_id</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>)  <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p>HAVING和WHERE的差别,这里有另一种理解方法:</p>
<ol>
<li>WHERE在数据分组前进行过滤，</li>
<li>HAVING在数据分组后进行过滤。</li>
<li>这是一个重要的区别，WHERE排除的行不包括在分组中。这可能会改变计算值，从而影响HAVING子句中基于这些值过滤掉的分组。</li>
</ol>
<h1 id="第十四章-使用子查询"><a href="#第十四章-使用子查询" class="headerlink" title="第十四章 使用子查询"></a>第十四章 使用子查询</h1><p>子查询最常见的使用是在WHERE子句的IN操作符中，以及用来填充计算列</p>
<h1 id="第十五章-联结表"><a href="#第十五章-联结表" class="headerlink" title="第十五章 联结表"></a>第十五章 联结表</h1><ol>
<li>等值联结<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> vend_name, prod_name, prod_price </span><br><span class="line"><span class="keyword">FROM</span> vendors, products </span><br><span class="line"><span class="keyword">where</span> vendors.vend_id <span class="operator">=</span> products.vend_id;</span><br></pre></td></tr></table></figure></li>
<li>内部联结<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> vend_name, prod_name, prod_price </span><br><span class="line"><span class="keyword">FROM</span> vendors <span class="keyword">INNER</span> <span class="keyword">JOIN</span> products </span><br><span class="line"><span class="keyword">ON</span> vendors.vend_id <span class="operator">=</span> products.vend_id;</span><br></pre></td></tr></table></figure></li>
<li>联结多个表<ul>
<li>联结多个表非常耗费资源</li>
</ul>
</li>
</ol>
<h1 id="第十六章-高级联结"><a href="#第十六章-高级联结" class="headerlink" title="第十六章 高级联结"></a>第十六章 高级联结</h1><p>外部联结(LEFT JOIN / RIGHT JOIN)</p>
<ul>
<li>外部联结还包括没有关联行的行</li>
<li>在使用OUTER JOIN语法时，必须使用RIGHT或LEFT关键字指定包括其所有行的表</li>
</ul>
<h1 id="第十七章-组合查询"><a href="#第十七章-组合查询" class="headerlink" title="第十七章 组合查询"></a>第十七章 组合查询</h1><p>MySQL允许执行多个查询（多条SELECT语句），并将结果作为单个查询结果集返回。这些组合查询通常称为并（union）或复合查询（compound query）。</p>
<p>TIPs：</p>
<ol>
<li>多数情况下，组合相同表的两个查询完成的工作与具有多个WHERE子句条件的单条查询完成的工作相同。</li>
<li>换句话说，任何具有多个WHERE子句的SELECT语句都可以作为一个组合查询给出。</li>
<li>这两种技术在不同的查询中性能也不同。因此，应该试一下这两种技术，以确定对特定的查询哪一种性能更好。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 用 UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> vend_id, prod_id, prod_price</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="operator">&lt;=</span> <span class="number">5</span></span><br><span class="line"><span class="keyword">UNION</span> </span><br><span class="line"><span class="keyword">SELECT</span> vend_id, prod_id, prod_price</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> vend_id <span class="keyword">IN</span> (<span class="number">1001</span>,<span class="number">1002</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用 WHERE OR</span></span><br><span class="line"><span class="keyword">SELECT</span> vend_id, prod_id, prod_price</span><br><span class="line"><span class="keyword">FROM</span> products</span><br><span class="line"><span class="keyword">WHERE</span> prod_price <span class="operator">&lt;=</span> <span class="number">5</span> </span><br><span class="line">	<span class="keyword">OR</span> vend_id <span class="keyword">IN</span> (<span class="number">1001</span>,<span class="number">1002</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例子查询了同一张表，还可以 `UNION` 不同的表</span></span><br></pre></td></tr></table></figure>

<p><code>UNION</code> 原则：</p>
<ol>
<li>必须由两条 <code>SELECT</code> 语句组成，两两之间要用 <code>UNION</code> 连接</li>
<li><code>UNION</code> 中的每个查询必须包含相同的列、表达式或聚集函数(次序可以不同)</li>
<li>列数据类型必须兼容：类型不必完全相同，但必须是DBMS可以隐含地转换的类型（例如，不同的数值类型或不同的日期类型）。</li>
</ol>
<p>重复行：</p>
<ol>
<li>如果有两条 SELECT 查到同一行， <code>UNION</code> 会自动去重。</li>
<li>但是如果想要支持不去重，可以改用 <code>UNION ALL</code> 关键字。</li>
<li><code>UNION ALL</code> 为 <code>UNION</code> 的一种形式，它完成 <code>WHERE</code> 子句完成不了的工作。</li>
</ol>
<p>排序：</p>
<ol>
<li>在用 <code>UNION</code> 组合查询时，只能使用一条 <code>ORDER BY</code> 子句</li>
<li>它必须出现在最后一条 <code>SELECT</code> 语句之后。</li>
<li>然后对所有的结果集进行排序</li>
</ol>
<h1 id="第十八章-全文本搜索"><a href="#第十八章-全文本搜索" class="headerlink" title="第十八章 全文本搜索"></a>第十八章 全文本搜索</h1><p>两个最常使用的引擎为 <code>MyISAM</code> 和 <code>InnoDB</code> ，前者支持全文本搜索，而后者不支持。</p>
<p>通配符和正则表达式搜索的限制：</p>
<ol>
<li>性能<br> 会尝试匹配数据库中的所有表，所以会非常耗时</li>
<li>明确控制<br> 很难（而且并不总是能）明确地控制匹配什么和不匹配什么。</li>
<li>智能化的结果<ul>
<li>虽然基于通配符和正则表达式的搜索提供了非常灵活的搜索。</li>
<li>但它们都不能提供一种智能化的选择结果的方法。</li>
<li>啥意思呢？比如搜索包含一个单词的行。不能区分包含了单个匹配还是多个匹配</li>
</ul>
</li>
</ol>
<p>那怎么用全文本搜搜解决呢？</p>
<ol>
<li>MySQL创建指定列中各词的一个索引，搜索可以针对这些词进行</li>
<li>这样，MySQL可以快速有效地决定哪些词匹配（哪些行包含它们），<br>哪些词不匹配，它们匹配的频率，等等。</li>
</ol>
<p>用法：</p>
<ol>
<li>为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改变不断地重新索引</li>
<li>在索引之后，SELECT可与Match()和Against()一起使用以实际执行搜索。</li>
</ol>
<p>启用：</p>
<ol>
<li>一般在创建表时启用全文本搜索。</li>
<li>CREATE TABLE语句接受FULLTEXT子句，它给出被索引列的一个逗号分隔的列表。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> productnotes</span><br><span class="line">(</span><br><span class="line">	note_id <span class="type">int</span>           <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">	prod_id <span class="type">char</span>(<span class="number">10</span>)      <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	note_date datetime    <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	note_text text        <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY(note_id),</span><br><span class="line">	FULLTEXT(note_text) <span class="comment">-- 对 note_text 这个列进行索引</span></span><br><span class="line">) ENGINE <span class="operator">=</span> MyISAM;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 这样定义之后，数据库会在 note_text 增加，更新，删除行时，</span></span><br><span class="line"><span class="comment">-- 索引会随之自动更新</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>不要在导入数据时使用FULLTEXT：<br>更新索引要花时间，虽然不是很多，但毕竟要花时间。如果正在导入数据到一个新表，此时不应该启用 <code>FULLTEXT</code> 索引。应该首先导入所有数据，然后再修改表，定义 <code>FULLTEXT</code> 。这样有助于更快地导入数据（而且使索引数据的总时间小于在导入每行时分别进行索引所需的总时间）。</p>
<p>全文搜索：</p>
<ol>
<li>使用两个函数 <code>Match()</code> 和 <code>Against()</code> 执行全文本搜索<ul>
<li>其中 <code>Match()</code> 指定被搜索的列，这个(些)列必须在 <code>FULLTEXT()</code> 中定义过</li>
<li><code>Against()</code> 指定要使用的搜索表达式。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> note_text</span><br><span class="line"><span class="keyword">FROM</span> productnotes</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">Match</span>(note_text) Against(<span class="string">&#x27;rabbit&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>全文本搜索的一个重要部分就是对结果排序。<br> 具有较高等级的行先返回（因为这些行很可能是你真正想要的行）。<br> 可以用以下的查询来查看，全文检索的 Rank：<ul>
<li>不包含 Rabbit rank 为 0</li>
<li>包含 Rabbit 的行有不同的 rank</li>
<li>等级由MySQL根据行中词的数目、唯一词的数目、整个索引中词的总数以及包含该词的行的数目计算出来。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> note_text, <span class="keyword">Match</span>(note_text) Against(<span class="string">&#x27;rabbit&#x27;</span>) <span class="keyword">AS</span> rank</span><br><span class="line"><span class="keyword">FROM</span> productnotes;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<p>查询拓展:</p>
<ul>
<li>查询扩展用来设法放宽所返回的全文本搜索结果的范围</li>
<li>在使用查询扩展时，MySQL对数据和索引进行两遍扫描来完成搜索： <ol>
<li>首先，进行一个基本的全文本搜索，找出与搜索条件匹配的所有行；</li>
<li>其次，查看上面行中的所有单词，选择出一些有用的词（拓展到要目标单词以外的单词）</li>
<li>最后，根绝这些拓展的词，再进行一遍全文搜索</li>
</ol>
</li>
</ul>
<p>布尔文本搜索：</p>
<ul>
<li>MySQL支持全文本搜索的另外一种形式，称为布尔方式（boolean mode）。</li>
<li>可以提供关于如下内容的细节：<ol>
<li>要匹配的词；</li>
<li>要排斥的词；（如果某行包含这个词，则不返回该行，即使它包含其他指定的词也是如此）</li>
<li>排列提示（指定某些词比其他词更重要，更重要的词等级更高）；</li>
<li>表达式分组；</li>
</ol>
</li>
<li>布尔方式不同于迄今为止使用的全文本搜索语法的地方在于， 即使没有定义 <code>FULLTEXT</code> 索引，也可以使用它。但这是一种非常缓慢的操作（其性能将随着数据量的增加而降低）。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 指定包含 heavy 且&amp;&amp; 不包含以rope开头的词</span></span><br><span class="line"><span class="keyword">SELECT</span> note_text</span><br><span class="line"><span class="keyword">FROM</span> productnotes</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">Match</span>(note_text) Against (<span class="string">&#x27;heavy -rope*&#x27;</span> <span class="keyword">IN</span> <span class="type">BOOLEAN</span> MODE);</span><br></pre></td></tr></table></figure></li>
<li>别的具体就省略不说了</li>
</ul>
<p>注意点：</p>
<ol>
<li>索引全文本搜索时， MySQL 默认忽略短词（三个字母及以下）</li>
<li>MySQL 内建词库忽略</li>
<li>词频很高忽略</li>
<li>表中行数少于三行，不返回结果</li>
</ol>
<h1 id="第十九章-插入数据"><a href="#第十九章-插入数据" class="headerlink" title="第十九章 插入数据"></a>第十九章 插入数据</h1><p>不同的插入类型：</p>
<ol>
<li>插入完整的行：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Customers</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="operator">&lt;</span>所有字段的值<span class="operator">&gt;</span>)</span><br><span class="line"><span class="comment">-- 主键自增的话，填 NULL</span></span><br><span class="line"><span class="comment">-- 这种语法很简单，但是不安全，应该避免使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Customers(cust_name,</span><br><span class="line">	cust_mail)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="operator">&lt;</span>对应字段的值<span class="operator">&gt;</span>);</span><br><span class="line"><span class="comment">-- 可省略一些列，但必须是允许NULL的列，</span></span><br><span class="line"><span class="comment">-- 或者是，定义中给出默认值的列</span></span><br></pre></td></tr></table></figure></li>
<li>插入多个行<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customers(cust_name,</span><br><span class="line">	cust_mail)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="operator">&lt;</span>对应字段的值<span class="operator">&gt;</span>), (<span class="operator">&lt;</span>第二组对应字段的值<span class="operator">&gt;</span>);</span><br></pre></td></tr></table></figure></li>
<li>插入检索出的数据( <code>INSERT SELECT</code> )<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> customers(cust_name,</span><br><span class="line">	cust_email)</span><br><span class="line"><span class="keyword">SELECT</span> cust_name,</span><br><span class="line">	cust_email</span><br><span class="line"><span class="keyword">FROM</span> cust_new;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- SELECT 语句的列名其实不重要</span></span><br><span class="line"><span class="comment">-- 重要的是和 INSERT 对应的列的数据列型匹配，列的数量也要相同</span></span><br><span class="line"><span class="comment">-- SELECT 也能用 WHERE 进行过滤</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="第二十章-更新和删除"><a href="#第二十章-更新和删除" class="headerlink" title="第二十章 更新和删除"></a>第二十章 更新和删除</h1><ol>
<li>更新：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UPDATE customers</span><br><span class="line"><span class="keyword">SET</span> cust_email <span class="operator">=</span> <span class="string">&#x27;eee@emai.com&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span> cust_id <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"><span class="comment">-- 如果没有 where 会更新整张表的 email 字段</span></span><br></pre></td></tr></table></figure></li>
<li>删除：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除一行</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> customers</span><br><span class="line"><span class="keyword">WHERE</span> cust_id <span class="operator">=</span> <span class="number">10006</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>注意：</p>
<ol>
<li>更新和删除的时候，除非确实对所有行进行操作，一定要带 WHERE</li>
<li>先对 WHERE 进行 SELECT 测试</li>
</ol>
<h1 id="第二十一章-创建和操作表"><a href="#第二十一章-创建和操作表" class="headerlink" title="第二十一章 创建和操作表"></a>第二十一章 创建和操作表</h1><ol>
<li>语法</li>
<li>主键</li>
<li>NOT NULLL</li>
<li>AUTO_INCREMENT</li>
<li>引擎类型<ul>
<li>InnoDB是一个可靠的事务处理引擎，它不支持全文本搜索；</li>
<li>MEMORY在功能等同于MyISAM，但由于数据存储在内存（不是磁盘）中，速度很快（特别适合于临时表）；</li>
<li>MyISAM是一个性能极高的引擎，它支持全文本搜索，但不支持事务处理。</li>
</ul>
</li>
<li>更改表<ul>
<li>ALTER TABLE</li>
</ul>
</li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Mysql/" rel="tag"># Mysql</a>
              <a href="/tags/Database/" rel="tag"># Database</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/art/diary/solar-term-us/%E3%80%90%E9%9A%8F%E7%AC%94%E3%80%91%E6%B8%85%E6%98%8E/" rel="prev" title="【随笔】清明——真实的生活">
      <i class="fa fa-chevron-left"></i> 【随笔】清明——真实的生活
    </a></div>
      <div class="post-nav-item">
    <a href="/technology/java/Java-%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F/" rel="next" title="Java_日志系统">
      Java_日志系统 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E4%BA%86%E8%A7%A3SQL"><span class="nav-number">1.</span> <span class="nav-text">第一章 了解SQL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-MySQL%E7%AE%80%E4%BB%8B"><span class="nav-number">2.</span> <span class="nav-text">第二章 MySQL简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E4%BD%BF%E7%94%A8-MySQL"><span class="nav-number">3.</span> <span class="nav-text">第三章 使用 MySQL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E6%95%B0%E6%8D%AE%E6%A3%80%E7%B4%A2"><span class="nav-number">4.</span> <span class="nav-text">第四章 数据检索</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E6%8E%92%E5%BA%8F%E6%A3%80%E7%B4%A2"><span class="nav-number">5.</span> <span class="nav-text">第五章 排序检索</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E8%BF%87%E6%BB%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">6.</span> <span class="nav-text">第六章 过滤数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4"><span class="nav-number">7.</span> <span class="nav-text">第七章 高级数据过滤</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-%E7%94%A8%E9%80%9A%E9%85%8D%E7%AC%A6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4"><span class="nav-number">8.</span> <span class="nav-text">第八章 用通配符进行过滤</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">9.</span> <span class="nav-text">第九章 正则表达式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-%E5%88%9B%E5%BB%BA%E8%AE%A1%E7%AE%97%E5%AD%97%E6%AE%B5"><span class="nav-number">10.</span> <span class="nav-text">第十章 创建计算字段</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0-%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="nav-number">11.</span> <span class="nav-text">第十一章 使用数据处理函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0-%E6%B1%87%E6%80%BB%E6%95%B0%E6%8D%AE"><span class="nav-number">12.</span> <span class="nav-text">第十二章 汇总数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AB%A0-%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE"><span class="nav-number">13.</span> <span class="nav-text">第十三章 分组数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AB%A0-%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">14.</span> <span class="nav-text">第十四章 使用子查询</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AB%A0-%E8%81%94%E7%BB%93%E8%A1%A8"><span class="nav-number">15.</span> <span class="nav-text">第十五章 联结表</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E5%85%AD%E7%AB%A0-%E9%AB%98%E7%BA%A7%E8%81%94%E7%BB%93"><span class="nav-number">16.</span> <span class="nav-text">第十六章 高级联结</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%83%E7%AB%A0-%E7%BB%84%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="nav-number">17.</span> <span class="nav-text">第十七章 组合查询</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E5%85%AB%E7%AB%A0-%E5%85%A8%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2"><span class="nav-number">18.</span> <span class="nav-text">第十八章 全文本搜索</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E5%8D%81%E4%B9%9D%E7%AB%A0-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">19.</span> <span class="nav-text">第十九章 插入数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E7%AB%A0-%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4"><span class="nav-number">20.</span> <span class="nav-text">第二十章 更新和删除</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%80%E7%AB%A0-%E5%88%9B%E5%BB%BA%E5%92%8C%E6%93%8D%E4%BD%9C%E8%A1%A8"><span class="nav-number">21.</span> <span class="nav-text">第二十一章 创建和操作表</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jiaming Ni</p>
  <div class="site-description" itemprop="description">你闻讯而来 我大喜过望</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">326</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">51</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jiaming Ni</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
